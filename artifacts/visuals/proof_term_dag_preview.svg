<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 280">
  <defs>
    <linearGradient id="bgDag" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0c0a1d"/>
      <stop offset="100%" style="stop-color:#000"/>
    </linearGradient>
    <marker id="arrowDag" markerWidth="6" markerHeight="5" refX="5" refY="2.5" orient="auto">
      <polygon points="0 0, 6 2.5, 0 5" fill="#6b7280"/>
    </marker>
  </defs>

  <rect width="400" height="280" fill="url(#bgDag)"/>

  <!-- Title -->
  <text x="200" y="25" text-anchor="middle" fill="#a78bfa" font-family="monospace" font-size="14" font-weight="bold">Proof Term DAG</text>
  <text x="200" y="42" text-anchor="middle" fill="#9ca3af" font-family="monospace" font-size="9">compile_correct structure</text>

  <!-- Root: Eq.trans -->
  <rect x="160" y="55" width="80" height="28" rx="6" fill="#3b82f6" stroke="#3b82f6" stroke-width="2"/>
  <text x="200" y="73" text-anchor="middle" fill="#fff" font-family="monospace" font-size="9">Eq.trans</text>

  <!-- Left branch: mix.correct -->
  <path d="M 180 83 C 140 100, 100 100, 80 115" fill="none" stroke="#6b7280" stroke-width="1.5" marker-end="url(#arrowDag)"/>
  <rect x="30" y="115" width="100" height="26" rx="6" fill="#3b82f6" stroke="#3b82f6" stroke-width="2"/>
  <text x="80" y="132" text-anchor="middle" fill="#fff" font-family="monospace" font-size="8">mix.correct</text>

  <!-- Right branch: model.correct -->
  <path d="M 220 83 C 260 100, 300 100, 320 115" fill="none" stroke="#6b7280" stroke-width="1.5" marker-end="url(#arrowDag)"/>
  <rect x="270" y="115" width="100" height="26" rx="6" fill="#3b82f6" stroke="#3b82f6" stroke-width="2"/>
  <text x="320" y="132" text-anchor="middle" fill="#fff" font-family="monospace" font-size="8">model.correct</text>

  <!-- Left subtree -->
  <path d="M 50 141 L 35 160" fill="none" stroke="#6b7280" stroke-width="1.5" marker-end="url(#arrowDag)"/>
  <ellipse cx="35" cy="175" rx="30" ry="14" fill="#22c55e" stroke="#22c55e" stroke-width="2"/>
  <text x="35" y="179" text-anchor="middle" fill="#fff" font-family="monospace" font-size="7">interp</text>

  <path d="M 80 141 L 80 160" fill="none" stroke="#6b7280" stroke-width="1.5" marker-end="url(#arrowDag)"/>
  <ellipse cx="80" cy="175" rx="25" ry="14" fill="#22c55e" stroke="#22c55e" stroke-width="2"/>
  <text x="80" y="179" text-anchor="middle" fill="#fff" font-family="monospace" font-size="7">code</text>

  <path d="M 110 141 L 125 160" fill="none" stroke="#6b7280" stroke-width="1.5" marker-end="url(#arrowDag)"/>
  <ellipse cx="125" cy="175" rx="25" ry="14" fill="#22c55e" stroke="#22c55e" stroke-width="2"/>
  <text x="125" y="179" text-anchor="middle" fill="#fff" font-family="monospace" font-size="7">input</text>

  <!-- Right subtree -->
  <path d="M 300 141 L 285 160" fill="none" stroke="#6b7280" stroke-width="1.5" marker-end="url(#arrowDag)"/>
  <ellipse cx="285" cy="175" rx="25" ry="14" fill="#22c55e" stroke="#22c55e" stroke-width="2"/>
  <text x="285" y="179" text-anchor="middle" fill="#fff" font-family="monospace" font-size="7">code</text>

  <path d="M 340 141 L 355 160" fill="none" stroke="#6b7280" stroke-width="1.5" marker-end="url(#arrowDag)"/>
  <ellipse cx="355" cy="175" rx="25" ry="14" fill="#22c55e" stroke="#22c55e" stroke-width="2"/>
  <text x="355" y="179" text-anchor="middle" fill="#fff" font-family="monospace" font-size="7">input</text>

  <!-- Type annotation -->
  <rect x="130" y="210" width="140" height="22" rx="4" fill="#1f2937" stroke="#374151" stroke-width="1"/>
  <text x="200" y="224" text-anchor="middle" fill="#c4b5fd" font-family="monospace" font-size="8">: evalResidual = codeSem</text>

  <!-- Legend -->
  <rect x="15" y="245" width="10" height="10" rx="2" fill="#3b82f6"/>
  <text x="30" y="254" fill="#9ca3af" font-family="monospace" font-size="8">App</text>

  <ellipse cx="80" cy="250" rx="10" ry="5" fill="#22c55e"/>
  <text x="95" y="254" fill="#9ca3af" font-family="monospace" font-size="8">Var</text>

  <rect x="130" y="245" width="10" height="10" rx="2" fill="#f59e0b"/>
  <text x="145" y="254" fill="#9ca3af" font-family="monospace" font-size="8">Const</text>

  <!-- Lambda symbol example -->
  <polygon points="200,250 210,245 220,250 210,255" fill="#8b5cf6"/>
  <text x="230" y="254" fill="#9ca3af" font-family="monospace" font-size="8">Lambda</text>

  <rect x="280" y="245" width="10" height="10" rx="2" fill="#ec4899"/>
  <text x="295" y="254" fill="#9ca3af" font-family="monospace" font-size="8">Ctor</text>
</svg>
